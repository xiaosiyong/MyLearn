#### CAP理论

大规模可扩放的网络服务时候会遇到三个特性：一致性（consistency）、可用性（Availability）、分区容错（partition-tolerance）

CAP定律说的是在一个分布式计算机系统中，一致性，可用性和分区容错性这三种保证无法同时得到满足，最多满足两个。

对于分布式数据库系统：

N 数据复制的份数，W更新数据需要保证完成的节点数 R读取数据时需要读取的节点数

W+R>N 写的节点和读的节点重叠，强一致性

例如典型的一主一备同步复制的关系型数据库，N=2，W=2，R=1 不管读主库还是备库，都是一致的

W+R<=N 则是弱一致性

如一主一备异步复制的关系型数据库，N=2，W=1，R=1 如果读的是备库，可能无法读取主库更新过的数据，弱一致性

对于分布式系统，为保证高可用，一般N>=3，不同的N，W，R组合，在可用性和一致性之间取舍、平衡，适应不同的场景

如：

N=W，R=1 任何一个写节点失效，导致写失败，可用性会降低，由于数据同步写入，因此可保证强一致性

N=R，W=1 只需要一个节点写入成功即可，写性能和可用性都比较高。读取数据可能不能获取更新后的数据，因此弱一致性